var $JSCompiler_alias_VOID$$=void 0,$JSCompiler_alias_TRUE$$=!0,$JSCompiler_alias_NULL$$=null,$JSCompiler_alias_FALSE$$=!1;window.isCanvasSupported=function isCanvasSupported(){var $elem$$165$$=document.createElement("canvas");return!(!$elem$$165$$.getContext||!$elem$$165$$.getContext("2d"))};
window.getLanguage=function getLanguage(){var $lang$$1$$=navigator.language?navigator.language:navigator.$userLanguage$,$match$$9$$=/^\s*([^-]*)-([^\s]*)\s*$/.exec($lang$$1$$);return $match$$9$$?$match$$9$$[1]:$lang$$1$$};window.widget_factory=window.$widget_factory$;window.widget_exception=window.$widget_exception$;var $$Graphit$$inline_2$$=graphit;window.$graphit$=window.graphit;var $getBird$$inline_3$$=window.$graphit$.getBird,$Cuid$$inline_4$$=$getBird$$inline_3$$("Cuid"),$Cuid$$inline_4$$=function $$Cuid$$inline_4$$$($options$$inline_5$$){$options$$inline_5$$=$options$$inline_5$$||{};$Cuid$$inline_4$$.prefix="shojs-";this.id=$JSCompiler_alias_NULL$$;this.init($options$$inline_5$$)};
$Cuid$$inline_4$$.prototype.init=function $$Cuid$$inline_4$$$$init$($options$$inline_6$$){"count"in $Cuid$$inline_4$$||($Cuid$$inline_4$$.count=0,$Cuid$$inline_4$$.prefix=($options$$inline_6$$.prefix||"shojs")+"-",$Cuid$$inline_4$$.$postfix$=$options$$inline_6$$.$postfix$||"graphit")};$Cuid$$inline_4$$.prototype.init=$Cuid$$inline_4$$.prototype.init;
$Cuid$$inline_4$$.prototype.$__get_frag$=function $$Cuid$$inline_4$$$$$__get_frag$$(){for(var $i$$inline_7_r$$inline_151$$=Math.round(Math.random()*Date.now()/655350),$i$$inline_7_r$$inline_151$$=parseInt(($i$$inline_7_r$$inline_151$$+"").slice(0,5)),$i$$inline_7_r$$inline_151$$=""+$i$$inline_7_r$$inline_151$$;5>$i$$inline_7_r$$inline_151$$.length;)$i$$inline_7_r$$inline_151$$="0"+$i$$inline_7_r$$inline_151$$;return $i$$inline_7_r$$inline_151$$};$Cuid$$inline_4$$.prototype.__get_frag=$Cuid$$inline_4$$.prototype.$__get_frag$;
$Cuid$$inline_4$$.prototype.get=function $$Cuid$$inline_4$$$$get$(){for(var $str$$inline_9$$=$Cuid$$inline_4$$.prefix,$i$$inline_10$$=0;2>$i$$inline_10$$;$i$$inline_10$$++)$str$$inline_9$$+=this.$__get_frag$()+"-";$str$$inline_9$$+=$Cuid$$inline_4$$.$postfix$;$Cuid$$inline_4$$.count++;return $Cuid$$inline_4$$.$last_id$=$str$$inline_9$$};$Cuid$$inline_4$$.prototype.get=$Cuid$$inline_4$$.prototype.get;
$Cuid$$inline_4$$.prototype.$__test$=function $$Cuid$$inline_4$$$$$__test$$(){var $g$$inline_11$$=new ($getBird$$inline_3$$("Cuid"));console.log("Testing uid",$g$$inline_11$$.get());return $JSCompiler_alias_TRUE$$};$Cuid$$inline_4$$.prototype.__test=$Cuid$$inline_4$$.prototype.$__test$;$$Graphit$$inline_2$$._class_pool.Cuid=$Cuid$$inline_4$$;var $$Graphit$$inline_13$$=graphit;
function $Cexception_message$$inline_14$$($opt$$inline_15$$){$opt$$inline_15$$=$opt$$inline_15$$||{};EXCEPTION={_ALL:{method_object_missing:"This object doesn't have the required method (See additional)"},Csurface:{invalid_width:"The specified width is invalid 0 < width < 1920",invalid_height:"The specified height is invalid 0 < height < 1920"},Ccanvas:{invalid_width:"The specified width is invalid 0 < width < 1920",invalid_height:"The specified height is invalid 0 < height < 1920",invalid_copy_source:"You're trying to copy something that is not a Ccanvas or who is null"},
Cmenu:{invalid_menu_entry:"Your are trying to add non Cmenu_entry object",label_already_present:"Label already set in this menu"},Ctool:{no_size_parameter:"Each tool require a size Cparameter"}};this.type="shojs-exception";this.className=$opt$$inline_15$$.className||"no object";this.label=$opt$$inline_15$$.label;this.additional=$opt$$inline_15$$.$additional$;this.object=$opt$$inline_15$$.object;this.original=$opt$$inline_15$$.$original$;this.message=$JSCompiler_alias_NULL$$;this.className in EXCEPTION&&
this.label in EXCEPTION[this.className]&&(this.message=EXCEPTION[this.className][this.label]);!this.message&&this.label in EXCEPTION._ALL&&(this.message=EXCEPTION._ALL[this.label])}
$Cexception_message$$inline_14$$.prototype.$to_s$=function $$Cexception_message$$inline_14$$$$$to_s$$($opt$$inline_16_str$$inline_18$$){var $nl$$inline_17$$="\n";$opt$$inline_16_str$$inline_18$$!=$JSCompiler_alias_VOID$$&&"format"in $opt$$inline_16_str$$inline_18$$&&"html"==$opt$$inline_16_str$$inline_18$$.$format$&&($nl$$inline_17$$="<br>"+$nl$$inline_17$$);$opt$$inline_16_str$$inline_18$$="["+this.type+"]"+$nl$$inline_17$$+$nl$$inline_17$$;for(label in this)this.hasOwnProperty(label)&&($opt$$inline_16_str$$inline_18$$=
"object"==typeof this[label]&&this[label]?$opt$$inline_16_str$$inline_18$$+(label+": "+this[label].toString()+$nl$$inline_17$$):$opt$$inline_16_str$$inline_18$$+(label+": "+this[label]+$nl$$inline_17$$));return $opt$$inline_16_str$$inline_18$$};$Cexception_message$$inline_14$$.prototype.to_s=$Cexception_message$$inline_14$$.prototype.$to_s$;$$Graphit$$inline_13$$._class_pool.Cexception_message=$Cexception_message$$inline_14$$;var $$Graphit$$inline_20$$=graphit;window.$graphit$=window.graphit;var $getBird$$inline_21$$=window.$graphit$.getBird;console.log("getBird");var $Cuid$$inline_22$$=$getBird$$inline_21$$("Cuid"),$Cexception_message$$inline_23$$=$getBird$$inline_21$$("Cexception_message"),$Cparameter_select$$inline_24$$=$getBird$$inline_21$$("Cparameter_select"),$Cparameter$$inline_25$$=$getBird$$inline_21$$("Cparameter");
function $Cobject$$inline_26$$($options$$inline_27$$,$permitted$$inline_28$$){this.className="Cobject";this.uid=$JSCompiler_alias_NULL$$;if($options$$inline_27$$!=$JSCompiler_alias_VOID$$){if(!($options$$inline_27$$ instanceof Object))throw console.error("[Cobject/Constructor] Options must be hash aka Object",this),"[Cobject/Constructor] Options must be hash aka Object";this.parent=$JSCompiler_alias_NULL$$;this.$parameters$={};this.$_class_init$($options$$inline_27$$,$permitted$$inline_28$$);try{this.init($options$$inline_27$$,
$permitted$$inline_28$$)}catch($e$$inline_29$$){throw console.error("Cannot init object << ",this," >> Exception <<< ",$e$$inline_29$$," >>>"),$e$$inline_29$$;}}}
$Cobject$$inline_26$$.prototype.$_class_init$=function $$Cobject$$inline_26$$$$$_class_init$$($options$$inline_30$$,$permitted$$inline_31$$){this.uid=(new $Cuid$$inline_22$$).get();console.log("Cuid",this.uid);this.$callback$={};10<window.$graphit$.debug&&console.log("UID",this.uid);this.$_parse_options$($options$$inline_30$$,$permitted$$inline_31$$);return this};$Cobject$$inline_26$$.prototype._class_init=$Cobject$$inline_26$$.prototype.$_class_init$;$Cobject$$inline_26$$.prototype.init=function $$Cobject$$inline_26$$$$init$(){return $JSCompiler_alias_FALSE$$};
$Cobject$$inline_26$$.prototype.init=$Cobject$$inline_26$$.prototype.init;
$Cobject$$inline_26$$.prototype.$exception$=function $$Cobject$$inline_26$$$$$exception$$($e$$inline_35_label$$inline_32$$,$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$,$msg$$inline_155_options$$inline_34$$){$e$$inline_35_label$$inline_32$$=new $Cexception_message$$inline_23$$({className:this.className,label:$e$$inline_35_label$$inline_32$$,$additional$:$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$,object:this});console.error($e$$inline_35_label$$inline_32$$.$to_s$());
console.log("Options",$msg$$inline_155_options$$inline_34$$);if($msg$$inline_155_options$$inline_34$$&&"dialog"in $msg$$inline_155_options$$inline_34$$&&$msg$$inline_155_options$$inline_34$$.$dialog$){$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$=window.$graphit$.$getBird$("Cexception_message");console.error("Widget",$e$$inline_35_label$$inline_32$$);var $msg$$inline_155_options$$inline_34$$=$e$$inline_35_label$$inline_32$$,$title$$inline_156$$="[Error] ";$e$$inline_35_label$$inline_32$$ instanceof
$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$&&($msg$$inline_155_options$$inline_34$$=$e$$inline_35_label$$inline_32$$.$to_s$({$format$:"html"}),$title$$inline_156$$=$title$$inline_156$$+$e$$inline_35_label$$inline_32$$.className+"/"+$e$$inline_35_label$$inline_32$$.label);$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$=$('<div title="'+$title$$inline_156$$+'" />');$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$.append($("<p>"+$msg$$inline_155_options$$inline_34$$+
"<p/>"));$Cexception_message$$inline_154_additional$$inline_33_r$$inline_157$$.$dialog$({$modal$:$JSCompiler_alias_TRUE$$})}throw $e$$inline_35_label$$inline_32$$;};$Cobject$$inline_26$$.prototype.exception=$Cobject$$inline_26$$.prototype.$exception$;
$Cobject$$inline_26$$.prototype.$_parse_options$=function $$Cobject$$inline_26$$$$$_parse_options$$($options$$inline_36$$,$permitted$$inline_37$$){console.log("Parsing option",$options$$inline_36$$,$permitted$$inline_37$$);if($options$$inline_36$$==$JSCompiler_alias_VOID$$)console.warn("No << {} >> argument passed to new Cobject");else{for(var $permitted$$inline_37$$=$permitted$$inline_37$$||[],$mandatory$$inline_38_pat$$inline_41$$=["className","label"],$i$$inline_39_m$$inline_42$$=0;$i$$inline_39_m$$inline_42$$<
$mandatory$$inline_38_pat$$inline_41$$.length;$i$$inline_39_m$$inline_42$$++)!($mandatory$$inline_38_pat$$inline_41$$[$i$$inline_39_m$$inline_42$$]in $options$$inline_36$$)&&!$options$$inline_36$$[$mandatory$$inline_38_pat$$inline_41$$[$i$$inline_39_m$$inline_42$$]]?this.$exception$("missing_mandatory_parameter",$mandatory$$inline_38_pat$$inline_41$$[$i$$inline_39_m$$inline_42$$]):$permitted$$inline_37$$.push($mandatory$$inline_38_pat$$inline_41$$[$i$$inline_39_m$$inline_42$$]);console.log("plop",
$permitted$$inline_37$$);for($i$$inline_39_m$$inline_42$$=0;$i$$inline_39_m$$inline_42$$<$permitted$$inline_37$$.length;$i$$inline_39_m$$inline_42$$++){var $label$$inline_40$$=$permitted$$inline_37$$[$i$$inline_39_m$$inline_42$$];console.log("Setting property",$label$$inline_40$$,$options$$inline_36$$[$label$$inline_40$$]);$label$$inline_40$$ in $options$$inline_36$$?this[$label$$inline_40$$]=$options$$inline_36$$[$label$$inline_40$$]:0<window.$graphit$.debug&&console.warn("Needed property <<",$label$$inline_40$$,
">> ")}this.$_permitted_keys$=$permitted$$inline_37$$;if("parameters"in $options$$inline_36$$)for(plabel in $options$$inline_36$$.$parameters$)this.$add_parameter$($options$$inline_36$$.$parameters$[plabel]);$mandatory$$inline_38_pat$$inline_41$$=/^callback_(.*)$/;for($label$$inline_40$$ in $options$$inline_36$$)($i$$inline_39_m$$inline_42$$=$mandatory$$inline_38_pat$$inline_41$$.exec($label$$inline_40$$))&&($i$$inline_39_m$$inline_42$$[1]in this.$callback$?console.error("Callback",$i$$inline_39_m$$inline_42$$[1],
"already installed skipping..."):this.$callback$[$i$$inline_39_m$$inline_42$$[1]]=$options$$inline_36$$[$label$$inline_40$$]);return $JSCompiler_alias_TRUE$$}};$Cobject$$inline_26$$.prototype._parse_options=$Cobject$$inline_26$$.prototype.$_parse_options$;
$Cobject$$inline_26$$.prototype.$install_callback$=function $$Cobject$$inline_26$$$$$install_callback$$($opt$$inline_43$$){(!$opt$$inline_43$$||!("name"in $opt$$inline_43$$)||!("callback"in $opt$$inline_43$$)||"function"!=typeof $opt$$inline_43$$.$callback$)&&this.$exception$("install_callback_bad_arguments",$opt$$inline_43$$);$opt$$inline_43$$.name in this.$callback$&&this.$exception$("install_callback_already_registered",$opt$$inline_43$$);this.$callback$[$opt$$inline_43$$.name]=$opt$$inline_43$$.$callback$};
$Cobject$$inline_26$$.prototype.install_callback=$Cobject$$inline_26$$.prototype.$install_callback$;$Cobject$$inline_26$$.prototype.guid=function $$Cobject$$inline_26$$$$guid$($what$$inline_44$$){return(""+this.className+"-"+this.uid+($what$$inline_44$$?"-"+$what$$inline_44$$:"")).toLowerCase()};$Cobject$$inline_26$$.prototype.guid=$Cobject$$inline_26$$.prototype.guid;$Cobject$$inline_26$$.prototype.$get_trigger_name$=function $$Cobject$$inline_26$$$$$get_trigger_name$$($action$$inline_45$$){return this.guid($action$$inline_45$$)};
$Cobject$$inline_26$$.prototype.get_trigger_name=$Cobject$$inline_26$$.prototype.$get_trigger_name$;$Cobject$$inline_26$$.prototype.$send_trigger$=function $$Cobject$$inline_26$$$$$send_trigger$$($action$$inline_46$$,$additional$$inline_47$$){var $name$$inline_48$$=this.$get_trigger_name$($action$$inline_46$$);4<window.$graphit$.debug&&console.log("[trigger/send]",$name$$inline_48$$,$additional$$inline_47$$);$(document).trigger($name$$inline_48$$,$additional$$inline_47$$)};
$Cobject$$inline_26$$.prototype.send_trigger=$Cobject$$inline_26$$.prototype.$send_trigger$;$Cobject$$inline_26$$.prototype.set=function $$Cobject$$inline_26$$$$set$(){throw"Not_implemented";};$Cobject$$inline_26$$.prototype.set=$Cobject$$inline_26$$.prototype.set;
$Cobject$$inline_26$$.prototype.$bind_trigger$=function $$Cobject$$inline_26$$$$$bind_trigger$$($name$$inline_52_srcobj$$inline_49$$,$action$$inline_50$$,$callback$$inline_51$$){if(!$name$$inline_52_srcobj$$inline_49$$)return console.warn("Cannot bind to null object"),$JSCompiler_alias_FALSE$$;$name$$inline_52_srcobj$$inline_49$$=$name$$inline_52_srcobj$$inline_49$$.$get_trigger_name$($action$$inline_50$$);4<window.$graphit$.debug&&console.debug("[trigger/bind]",$action$$inline_50$$,this.className,
" => ",$name$$inline_52_srcobj$$inline_49$$);$(document).bind($name$$inline_52_srcobj$$inline_49$$,function($event$$inline_53$$,$data$$inline_54$$){$callback$$inline_51$$.call(this,$event$$inline_53$$,$data$$inline_54$$)});return $JSCompiler_alias_TRUE$$};$Cobject$$inline_26$$.prototype.bind_trigger=$Cobject$$inline_26$$.prototype.$bind_trigger$;
$Cobject$$inline_26$$.prototype.$add_parameter$=function $$Cobject$$inline_26$$$$$add_parameter$$($options$$inline_55$$){console.log("Add parameter",$options$$inline_55$$);new $Cparameter$$inline_25$$;"parent"in $options$$inline_55$$||($options$$inline_55$$.parent=this);"label"in $options$$inline_55$$||this.$exception$("parameter_need_label",$options$$inline_55$$);!("type"in $options$$inline_55$$)||$options$$inline_55$$.type==Eparameter_type.$numeric$?this.$parameters$[$options$$inline_55$$.label]=
new Cparameter_numeric($options$$inline_55$$):$options$$inline_55$$.type==$Cparameter_select$$inline_24$$.Etype.select?this.$parameters$[$options$$inline_55$$.label]=new $Cparameter_select$$inline_24$$($options$$inline_55$$):this.$exception$("unknow_parameter_type");return $JSCompiler_alias_TRUE$$};$Cobject$$inline_26$$.prototype.add_parameter=$Cobject$$inline_26$$.prototype.$add_parameter$;
$Cobject$$inline_26$$.prototype.$get_parameter$=function $$Cobject$$inline_26$$$$$get_parameter$$($key$$inline_56$$){(!("parameters"in this)||!($key$$inline_56$$ in this.$parameters$))&&this.$exception$("accessing_unknow_parameter",$key$$inline_56$$);return this.$parameters$[$key$$inline_56$$].get()};$Cobject$$inline_26$$.prototype.get_parameter=$Cobject$$inline_26$$.prototype.$get_parameter$;
$Cobject$$inline_26$$.prototype.$callback_exists$=function $$Cobject$$inline_26$$$$$callback_exists$$($name$$inline_57$$){return $name$$inline_57$$ in this.$callback$&&"function"==typeof this.$callback$[$name$$inline_57$$]?this.$callback$[$name$$inline_57$$]:$JSCompiler_alias_NULL$$};$Cobject$$inline_26$$.prototype.callback_exists=$Cobject$$inline_26$$.prototype.$callback_exists$;
$Cobject$$inline_26$$.prototype.$dom_get$=function $$Cobject$$inline_26$$$$$dom_get$$($options$$inline_58_r$$inline_60$$){$options$$inline_58_r$$inline_60$$=$options$$inline_58_r$$inline_60$$||{};$options$$inline_58_r$$inline_60$$.force=$JSCompiler_alias_FALSE$$;var $rootElm$$inline_59$$=this.rootElm;if($options$$inline_58_r$$inline_60$$.force||!$rootElm$$inline_59$$)$rootElm$$inline_59$$=this.$dom_build$().rootElm;if("noHeader"in $options$$inline_58_r$$inline_60$$&&$options$$inline_58_r$$inline_60$$.noHeader)return $rootElm$$inline_59$$;
$options$$inline_58_r$$inline_60$$=$("<div />");$options$$inline_58_r$$inline_60$$.attr("id",this.uid);$options$$inline_58_r$$inline_60$$.attr("title",this.label);$options$$inline_58_r$$inline_60$$.addClass((this.className+"-"+this.label).toLowerCase());$options$$inline_58_r$$inline_60$$.append($rootElm$$inline_59$$);return $options$$inline_58_r$$inline_60$$};$Cobject$$inline_26$$.prototype.dom_get=$Cobject$$inline_26$$.prototype.$dom_get$;
$Cobject$$inline_26$$.prototype.$add_widget$=function $$Cobject$$inline_26$$$$$add_widget$$($name$$inline_61$$,$rootElm$$inline_62$$){(!$name$$inline_61$$||!$rootElm$$inline_62$$)&&this.$exception$("no_name_or_root_elm",{name:$name$$inline_61$$,$rootElm$:$rootElm$$inline_62$$});"widgets"in this||(this.$widgets$={});$name$$inline_61$$ in this.$widgets$&&this.$exception$("dialog_already_exist",$name$$inline_61$$);this.$widgets$[$name$$inline_61$$]=$rootElm$$inline_62$$;return this};
$Cobject$$inline_26$$.prototype.add_widget=$Cobject$$inline_26$$.prototype.$add_widget$;$Cobject$$inline_26$$.prototype.$to_s$=function $$Cobject$$inline_26$$$$$to_s$$($nl$$inline_63$$){var $nl$$inline_63$$=$nl$$inline_63$$||"\n",$str$$inline_64$$="["+this.className+"]"+$nl$$inline_63$$,$str$$inline_64$$=$str$$inline_64$$+(" - uid: "+this.uid+$nl$$inline_63$$);return $str$$inline_64$$+=" - trigger name: "+this.$get_trigger_name$()+$nl$$inline_63$$};$Cobject$$inline_26$$.prototype.to_s=$Cobject$$inline_26$$.prototype.$to_s$;
$Cobject$$inline_26$$.prototype.$get_widget$=function $$Cobject$$inline_26$$$$$get_widget$$($name$$inline_65$$){(!$name$$inline_65$$||!($name$$inline_65$$ in this.$widgets$))&&this.$exception$("no_widget_with_this_name",{name:$name$$inline_65$$});return this.$widgets$[$name$$inline_65$$]};$Cobject$$inline_26$$.prototype.get_widget=$Cobject$$inline_26$$.prototype.$get_widget$;
$Cobject$$inline_26$$.prototype.$__test$=function $$Cobject$$inline_26$$$$$__test$$($opt$$inline_66$$){var $o$$inline_67$$=new ($getBird$$inline_21$$("Cobject"))({parent:this,label:"Test",className:"Test"});console.debug($o$$inline_67$$.$to_s$($opt$$inline_66$$));try{$o$$inline_67$$.$exception$("test_exception","We are throwing a test exception")}catch($e$$inline_68$$){if("shojs-exception"!=$e$$inline_68$$.type)throw $e$$inline_68$$;console.error("Exception",$e$$inline_68$$,$e$$inline_68$$.$to_s$($opt$$inline_66$$));
return $JSCompiler_alias_FALSE$$}return $JSCompiler_alias_TRUE$$};$Cobject$$inline_26$$.prototype.__test=$Cobject$$inline_26$$.prototype.$__test$;$$Graphit$$inline_20$$._class_pool.Cobject=$Cobject$$inline_26$$;var $$Graphit$$inline_70$$=graphit;window.$graphit$=window.graphit;var $getBird$$inline_71$$=window.$graphit$.getBird;function $Clocal_storage$$inline_72$$(){this.className="Clocal_storage";this.$first_install$();this.store={}}$Clocal_storage$$inline_72$$.prototype.$first_install$=function $$Clocal_storage$$inline_72$$$$$first_install$$(){this.$test_compatibility$()?(this.$store$=window.localStorage,this.$test_insert$()||(this.$store$={})):this.$store$={}};
$Clocal_storage$$inline_72$$.prototype.first_install=$Clocal_storage$$inline_72$$.prototype.$first_install$;$Clocal_storage$$inline_72$$.prototype.$test_compatibility$=function $$Clocal_storage$$inline_72$$$$$test_compatibility$$(){if("localStorage"in window&&window.localStorage!=$JSCompiler_alias_NULL$$)return $JSCompiler_alias_TRUE$$;console.error("Your web browser doesn't support web storage");return $JSCompiler_alias_FALSE$$};$Clocal_storage$$inline_72$$.prototype.test_compatibility=$Clocal_storage$$inline_72$$.prototype.$test_compatibility$;
$Clocal_storage$$inline_72$$.prototype.$test_insert$=function $$Clocal_storage$$inline_72$$$$$test_insert$$(){try{this.set("_____TEST_INSERT_VALUE_____","_____TEST_INSERT_VALUE_____")}catch($e$$inline_73$$){return $JSCompiler_alias_FALSE$$}this.remove("_____TEST_INSERT_VALUE_____");return $JSCompiler_alias_TRUE$$};$Clocal_storage$$inline_72$$.prototype.test_insert=$Clocal_storage$$inline_72$$.prototype.$test_insert$;$Clocal_storage$$inline_72$$.prototype.list=function $$Clocal_storage$$inline_72$$$$list$(){return this.$store$};
$Clocal_storage$$inline_72$$.prototype.list=$Clocal_storage$$inline_72$$.prototype.list;$Clocal_storage$$inline_72$$.prototype.remove=function $$Clocal_storage$$inline_72$$$$remove$($key$$inline_74$$){if("removeItem"in this.$store$)return this.$store$.removeItem($key$$inline_74$$);delete store[$key$$inline_74$$]};$Clocal_storage$$inline_72$$.prototype.remove=$Clocal_storage$$inline_72$$.prototype.remove;
$Clocal_storage$$inline_72$$.prototype.get=function $$Clocal_storage$$inline_72$$$$get$($k$$inline_75$$){return this.$store$&&$k$$inline_75$$ in this.$store$?this.$store$[$k$$inline_75$$]:$JSCompiler_alias_NULL$$};$Clocal_storage$$inline_72$$.prototype.get=$Clocal_storage$$inline_72$$.prototype.get;
$Clocal_storage$$inline_72$$.prototype.set=function $$Clocal_storage$$inline_72$$$$set$($k$$inline_76$$,$v$$inline_77$$){console.log("Setting",$k$$inline_76$$,"with",$v$$inline_77$$,"into",this.$store$);this.$store$||console.error("Storage not set");try{"removeItem"in this.$store$&&this.$store$.removeItem($k$$inline_76$$),this.$store$[$k$$inline_76$$]=$v$$inline_77$$}catch($e$$inline_79$$){var $me$$inline_78$$=new Cexception_message({label:"store_new_value_failed",className:this.className,object:this,
additional:"key: "+$k$$inline_76$$+" / value: "+$v$$inline_77$$,original:$e$$inline_79$$});console.error($me$$inline_78$$.$to_s$(),$e$$inline_79$$)}};$Clocal_storage$$inline_72$$.prototype.set=$Clocal_storage$$inline_72$$.prototype.set;
$Clocal_storage$$inline_72$$.prototype.$__test$=function $$Clocal_storage$$inline_72$$$$$__test$$(){var $Clocal_storage$$inline_80$$=$getBird$$inline_71$$("Clocal_storage");window.$graphit$.$storage$=new $Clocal_storage$$inline_80$$;window.$graphit$.storage=window.$graphit$.$storage$;console.log("Listing keys in storage");console.log("Add key");graphit.$storage$.set("__TEST__","__TEST__");if("__TEST__"!=graphit.$storage$.get("__TEST__"))throw this.className+"_cannot_fetch_key";console.log("Fetching key",
"__TEST__","Ok");for(var $key$$inline_81$$ in graphit.$storage$.list())console.log($key$$inline_81$$,graphit.$storage$.get($key$$inline_81$$));console.log("Remove key");graphit.$storage$.remove("__TEST__");for($key$$inline_81$$ in graphit.$storage$.list())console.log($key$$inline_81$$,graphit.$storage$.get($key$$inline_81$$));return $JSCompiler_alias_TRUE$$};$Clocal_storage$$inline_72$$.prototype.__test=$Clocal_storage$$inline_72$$.prototype.$__test$;
$$Graphit$$inline_70$$._class_pool.Clocal_storage=$Clocal_storage$$inline_72$$;var $$Graphit$$inline_83$$=graphit;window.$graphit$=window.graphit;var $getBird$$inline_84$$=window.$graphit$.getBird,$Cobject$$inline_85$$=$getBird$$inline_84$$("Cobject"),$Cexception_message$$inline_86$$=$getBird$$inline_84$$("Cexception_message");
function $Cpo$$inline_87$$($options$$inline_88$$){this.PO=this.$PO$={en:{menu_new_surface:"New",menu_theme:"Theme",menu_about:"About",menu_toolbox:"Toolbox",menu_file:"File",menu_help:"Help",menu_edition:"Edition",menu_login:"Login",menu_logout:"Logout",foreground_color:"Foreground color",background_color:"Background color",layers:"Layers",switch_color:"Switch color",tool_pencil:"Pen",tool_paintbrush:"Brush",tool_eraser:"Eraser","tool_bucket-fill":"Fill","tool_color-picker":"Color picker",right_click_to_save:"Right click -> Save as",
save_image:"Save image",save:"Save",open:"Open",load:"Load",load_image:"Load image (URL)"},fr:{menu_new_surface:"Nouveau",menu_theme:"Theme",menu_about:"A propos",menu_file:"Fichier",menu_help:"Aide",menu_edition:"Edition",menu_toolbox:"Outils",foreground_color:"Couleur principal",background_color:"Couleur de fond",layers:"Calques",switch_color:"Echange de couleur",tool_pencil:"Crayon",tool_paintbrush:"Pinceau",tool_eraser:"Gomme","tool_bucket-fill":"Remplir","tool_color-picker":"Selection de couleur",
right_click_to_save:"Clique droit -> Enregistrer l'image sous",save:"Sauver",open:"Ouvrir",load:"Charger",load_image:"Charger image (URL)"}};this.def=this.label=$JSCompiler_alias_NULL$$;$options$$inline_88$$=$options$$inline_88$$||{};$options$$inline_88$$.className="po";$options$$inline_88$$.label="po";$options$$inline_88$$.def="en";$options$$inline_88$$.lang=$options$$inline_88$$.lang||$options$$inline_88$$.def;$Cobject$$inline_85$$.call(this,$options$$inline_88$$,["lang","def"])}
$Cpo$$inline_87$$.prototype=Object.create($Cobject$$inline_85$$.prototype);
$Cpo$$inline_87$$.prototype.get=function $$Cpo$$inline_87$$$$get$($label$$inline_89$$){var $def$$inline_90$$=this.def,$lang$$inline_91$$=this.lang||$def$$inline_90$$,$po$$inline_92$$=$JSCompiler_alias_NULL$$;if($lang$$inline_91$$ in this.PO&&$label$$inline_89$$ in this.PO[$lang$$inline_91$$])$po$$inline_92$$=this.PO[$lang$$inline_91$$];else if($def$$inline_90$$ in this.PO&&$label$$inline_89$$ in this.PO[$def$$inline_90$$])$po$$inline_92$$=this.PO[$def$$inline_90$$];else throw new $Cexception_message$$inline_86$$({className:this.className,
label:"no_trad_and_no_def",object:this,additional:$label$$inline_89$$});return $po$$inline_92$$[$label$$inline_89$$]};$Cpo$$inline_87$$.prototype.get=$Cpo$$inline_87$$.prototype.get;
$Cpo$$inline_87$$.prototype.$to_s$=function $$Cpo$$inline_87$$$$$to_s$$($nl$$inline_94_opt$$inline_93$$){var $nl$$inline_94_opt$$inline_93$$=$nl$$inline_94_opt$$inline_93$$||{},$nl$$inline_94_opt$$inline_93$$=$nl$$inline_94_opt$$inline_93$$.$nl$||"\n",$str$$inline_95$$="["+this.className+"]"+$nl$$inline_94_opt$$inline_93$$,$str$$inline_95$$=$str$$inline_95$$+(" - label: "+this.label+$nl$$inline_94_opt$$inline_93$$);for(lang in this.PO)for(msg in $str$$inline_95$$+="--- LANG "+lang+$nl$$inline_94_opt$$inline_93$$,
this.PO[lang])$str$$inline_95$$+=" - "+msg+" => "+this.PO[lang][msg]+$nl$$inline_94_opt$$inline_93$$;return $str$$inline_95$$};$Cpo$$inline_87$$.prototype.to_s=$Cpo$$inline_87$$.prototype.$to_s$;$Cpo$$inline_87$$.prototype.$set_lang$=function $$Cpo$$inline_87$$$$$set_lang$$($lang$$inline_96$$){this.lang=$lang$$inline_96$$};$Cpo$$inline_87$$.prototype.set_lang=$Cpo$$inline_87$$.prototype.$set_lang$;
$Cpo$$inline_87$$.prototype.$__test$=function $$Cpo$$inline_87$$$$$__test$$(){var $T$$inline_97$$=new ($getBird$$inline_84$$("Cpo"))({lang:"en"}),$lang$$inline_98$$;for($lang$$inline_98$$ in $T$$inline_97$$.$PO$){console.log("Lang <<<",$lang$$inline_98$$,">>>");for(var $label$$inline_99$$ in $T$$inline_97$$.$PO$[$lang$$inline_98$$])console.log("Label to translate: "+$label$$inline_99$$),console.log(" - Translate",$T$$inline_97$$.get($label$$inline_99$$))}$lang$$inline_98$$="fr";console.log("Setting lang to",
$lang$$inline_98$$);this.$set_lang$($lang$$inline_98$$);console.log($T$$inline_97$$.$to_s$());return $JSCompiler_alias_TRUE$$};$Cpo$$inline_87$$.prototype.__test=$Cpo$$inline_87$$.prototype.$__test$;$$Graphit$$inline_83$$._class_pool.Cpo=$Cpo$$inline_87$$;var $$Graphit$$inline_101$$=graphit;window.$graphit$=window.graphit;var $getBird$$inline_102$$=window.$graphit$.getBird,$Cobject$$inline_103$$=$getBird$$inline_102$$("Cobject"),$Clocal_storage$$inline_104$$=$getBird$$inline_102$$("Clocal_storage");
function $Cparameter$$inline_105$$($options$$inline_106$$){this.Etype=this.$Etype$={numeric:1,select:2,checkbox:3};console.log("Etype",this.$Etype$);$options$$inline_106$$=$options$$inline_106$$||{};$options$$inline_106$$.className=$options$$inline_106$$.className||"Cparameter";$options$$inline_106$$.autoSave="autoSave"in $options$$inline_106$$&&$options$$inline_106$$.$autoSave$?$JSCompiler_alias_TRUE$$:$JSCompiler_alias_FALSE$$;$options$$inline_106$$.label=$options$$inline_106$$.label||"parameter";
"parameters"in $options$$inline_106$$&&this.$exception$("no_parameter_for_me");this.store=this.value=this.store=this.$store$=this.autoSave=this.$autoSave$=this.label=this.label=this.def=this.$def$=this.type=this.type=this.parent=this.parent=$JSCompiler_alias_NULL$$;$Cobject$$inline_103$$.call(this,$options$$inline_106$$,["parent","type","def","label","autoSave"]);this.$autoSave$&&(this.$store$=new $Clocal_storage$$inline_104$$);if(!$options$$inline_106$$.parent&&"Cparameter"!=this.className)return this.$exception$("mandatory_argument_missing",
"parent"),$JSCompiler_alias_NULL$$;this.$__post_init$($options$$inline_106$$);return this}$Cparameter$$inline_105$$.prototype=Object.create($Cobject$$inline_103$$.prototype);
$Cparameter$$inline_105$$.prototype.$__post_init$=function $$Cparameter$$inline_105$$$$$__post_init$$($options$$inline_107$$){if(this.$autoSave$){var $exp$$inline_110_label$$inline_108_v$$inline_109$$=this.$make_registry_key$();0<window.$graphit$.debug&&console.log("Loading parameter",$exp$$inline_110_label$$inline_108_v$$inline_109$$);$exp$$inline_110_label$$inline_108_v$$inline_109$$=this.$store$.get($exp$$inline_110_label$$inline_108_v$$inline_109$$);this.value=$exp$$inline_110_label$$inline_108_v$$inline_109$$!=
$JSCompiler_alias_VOID$$?this.$_set$($exp$$inline_110_label$$inline_108_v$$inline_109$$):this.$_set$(this.$def$)}else this.value=this.$_set$(this.$def$);this.$rootElm$=$JSCompiler_alias_NULL$$;var $exp$$inline_110_label$$inline_108_v$$inline_109$$=/^callback_(.*)$/,$k$$inline_111$$;for($k$$inline_111$$ in $options$$inline_107$$)$exp$$inline_110_label$$inline_108_v$$inline_109$$.exec($k$$inline_111$$)&&($options$$inline_107$$[$k$$inline_111$$]&&"function"==typeof $options$$inline_107$$[$k$$inline_111$$])&&
(10<window.$graphit$.debug&&console.log("Installing callback for parameter["+this.type+"]",$k$$inline_111$$),this[$k$$inline_111$$]=$options$$inline_107$$[$k$$inline_111$$])};$Cparameter$$inline_105$$.prototype.__post_init=$Cparameter$$inline_105$$.prototype.$__post_init$;
$Cparameter$$inline_105$$.prototype.set=function $$Cparameter$$inline_105$$$$set$($label$$inline_113_value$$inline_112$$){if(this.value==$label$$inline_113_value$$inline_112$$)return $JSCompiler_alias_FALSE$$;this.value=this.$_set$($label$$inline_113_value$$inline_112$$);this.autoSave&&($label$$inline_113_value$$inline_112$$=this.$make_registry_key$(),this.store.set($label$$inline_113_value$$inline_112$$,this.value));return $JSCompiler_alias_TRUE$$};$Cparameter$$inline_105$$.prototype.set=$Cparameter$$inline_105$$.prototype.set;
$Cparameter$$inline_105$$.prototype.$_set$=function $$Cparameter$$inline_105$$$$$_set$$($value$$inline_114$$){return $value$$inline_114$$};$Cparameter$$inline_105$$.prototype._set=$Cparameter$$inline_105$$.prototype.$_set$;$Cparameter$$inline_105$$.prototype.reset=function $$Cparameter$$inline_105$$$$reset$(){this.set(this.$def$);return this.get()};$Cparameter$$inline_105$$.prototype.reset=$Cparameter$$inline_105$$.prototype.reset;$Cparameter$$inline_105$$.prototype.get=function $$Cparameter$$inline_105$$$$get$(){return this.$_get$(this.value)};
$Cparameter$$inline_105$$.prototype.get=$Cparameter$$inline_105$$.prototype.get;$Cparameter$$inline_105$$.prototype.$_get$=function $$Cparameter$$inline_105$$$$$_get$$($value$$inline_115$$){return $value$$inline_115$$};$Cparameter$$inline_105$$.prototype._get=$Cparameter$$inline_105$$.prototype.$_get$;
$Cparameter$$inline_105$$.prototype.$make_registry_key$=function $$Cparameter$$inline_105$$$$$make_registry_key$$(){var $classname$$inline_116$$=this.parent.className,$label$$inline_117$$=this.parent.label;$classname$$inline_116$$||this.$exception$("no_classname_in_parent");$label$$inline_117$$||this.$exception$("no_label_in_parent");return($classname$$inline_116$$+"-"+$label$$inline_117$$+"-"+this.label).toLowerCase()};$Cparameter$$inline_105$$.prototype.make_registry_key=$Cparameter$$inline_105$$.prototype.$make_registry_key$;
$Cparameter$$inline_105$$.prototype.to_s=$Cparameter$$inline_105$$.prototype.$to_s$;$Cparameter$$inline_105$$.prototype.$__test$=function $$Cparameter$$inline_105$$$$$__test$$(){(new ($getBird$$inline_102$$(this.className))({autoSave:$JSCompiler_alias_TRUE$$,parent:this,def:"Test",type:this.Etype.numeric})).set("__TEST__","__TEST__");return $JSCompiler_alias_TRUE$$};$Cparameter$$inline_105$$.prototype.__test=$Cparameter$$inline_105$$.prototype.$__test$;
$$Graphit$$inline_101$$._class_pool.Cparameter=$Cparameter$$inline_105$$;var $$Graphit$$inline_119$$=graphit;window.$graphit$=window.graphit;var $getBird$$inline_120$$=window.$graphit$.getBird,$Cparameter$$inline_121$$=$getBird$$inline_120$$("Cparameter");
function $Cparameter_select$$inline_122$$($options$$inline_123$$){$options$$inline_123$$=$options$$inline_123$$||{};$options$$inline_123$$.className="Cparameter_select";$options$$inline_123$$.parent=$options$$inline_123$$.parent||window;$options$$inline_123$$.autoSave="autoSave"in $options$$inline_123$$&&!$options$$inline_123$$.autoSave?$JSCompiler_alias_FALSE$$:$JSCompiler_alias_TRUE$$;$Cparameter$$inline_121$$.call(this,$options$$inline_123$$,"autoSave","def","label","type","choices");this.type=
this.Etype.select}$Cparameter_select$$inline_122$$.prototype=Object.create($Cparameter$$inline_121$$.prototype);$Cparameter_select$$inline_122$$.prototype.init=function $$Cparameter_select$$inline_122$$$$init$($options$$inline_124$$){this.choices={};this.def=$options$$inline_124$$.def;this.label=$options$$inline_124$$.label;this.type=$options$$inline_124$$.type;for(label in $options$$inline_124$$.choices)console.log("Setting choices",label),this.choices[label]=$options$$inline_124$$.choices[label]};
$Cparameter_select$$inline_122$$.prototype.init=$Cparameter_select$$inline_122$$.prototype.init;
$Cparameter_select$$inline_122$$.prototype.$dom_build$=function $$Cparameter_select$$inline_122$$$$$dom_build$$(){this.$rootElm$=this.rootElm;this.label=this.label;this.$choices$=this.choices;var $that$$inline_125$$=this,$r$$inline_126$$=$('<div title="'+this.className+'">');$r$$inline_126$$.addClass("selected parameter");$r$$inline_126$$.append("<h6>"+this.label+"</h6>");var $s$$inline_127$$=$("<select />");for(c in this.$choices$){console.log("Option",this.$choices$[c]);var $o$$inline_128$$=$("<option/>");
$o$$inline_128$$.attr("value",this.$choices$[c]);this.value==this.$choices$[c]&&$o$$inline_128$$.attr("selected","selected");$o$$inline_128$$.append(document.createTextNode(this.$choices$[c]));$s$$inline_127$$.append($o$$inline_128$$)}$s$$inline_127$$.change(function(){$that$$inline_125$$.set(this.value);$that$$inline_125$$.rootElm.find("option").each(function(){$(this)});"callback_change"in $that$$inline_125$$&&$that$$inline_125$$.$callback_change$.call($that$$inline_125$$,this.value)});$r$$inline_126$$.append($s$$inline_127$$);
this.rootElm=$r$$inline_126$$;return this};$Cparameter_select$$inline_122$$.prototype.dom_build=$Cparameter_select$$inline_122$$.prototype.$dom_build$;
$Cparameter_select$$inline_122$$.prototype.$__test$=function $$Cparameter_select$$inline_122$$$$$__test$$(){var $dom$$inline_159$$=(new ($getBird$$inline_120$$("Cparameter_select"))({parent:{className:this.className,labe:this.label},label:"Test parameter select",def:"test01",choices:["test01","test02","test03"]})).$dom_get$();if(!$dom$$inline_159$$)throw"func_widget_factory_need_dom";console.log("Widget factory",$dom$$inline_159$$,$JSCompiler_alias_VOID$$);var $mandatory$$inline_160$$={autoOpen:$JSCompiler_alias_TRUE$$,
resizable:$JSCompiler_alias_TRUE$$,draggable:$JSCompiler_alias_TRUE$$,width:250,zIndex:10,dialogClass:"shojs-dialog",stack:$JSCompiler_alias_TRUE$$},$label$$inline_161$$;for($label$$inline_161$$ in $mandatory$$inline_160$$);$dom$$inline_159$$.dialog($JSCompiler_alias_VOID$$);return $JSCompiler_alias_TRUE$$};$Cparameter_select$$inline_122$$.prototype.__test=$Cparameter_select$$inline_122$$.prototype.$__test$;$$Graphit$$inline_119$$._class_pool.Cparameter_select=$Cparameter_select$$inline_122$$;var $$NS$$inline_131$$=graphit;window.$graphit$=window.graphit;window.$graphit$.$getBird$=window.graphit;var $getBird$$inline_132$$=window.$graphit$.getBird,$Cparameter_select$$inline_133$$=$getBird$$inline_132$$("Cparameter_select"),$Clocal_storage$$inline_134$$=$getBird$$inline_132$$("Clocal_storage");
function $Cjquery_theme_injector$$inline_135$$($name$$inline_137$$){this.key="cjquery-theme-chooser-name";this.name=$name$$inline_137$$||"south-street";this.ls=new $Clocal_storage$$inline_134$$;this.init(this.name);this.$inject_script$(this.name)}$Cjquery_theme$$inline_136$$.prototype.$__test$=function $$Cjquery_theme$$inline_136$$$$$__test$$(){new ($getBird$$inline_132$$("Cjquery_theme_injector"))};$Cjquery_theme$$inline_136$$.prototype.__test=$Cjquery_theme$$inline_136$$.prototype.$__test$;
$Cjquery_theme_injector$$inline_135$$.prototype.init=function $$Cjquery_theme_injector$$inline_135$$$$init$($name$$inline_138$$){var $ntheme$$inline_139$$=this.ls.get(this.key);$ntheme$$inline_139$$?this.name=$ntheme$$inline_139$$:(this.ls.set(this.key,$name$$inline_138$$),this.name=$name$$inline_138$$)};$Cjquery_theme_injector$$inline_135$$.prototype.init=$Cjquery_theme_injector$$inline_135$$.prototype.init;
$Cjquery_theme_injector$$inline_135$$.prototype.$inject_script$=function $$Cjquery_theme_injector$$inline_135$$$$$inject_script$$($name$$inline_140_src$$inline_142$$){var $e$$inline_141$$=document.createElement("link");$e$$inline_141$$.setAttribute("rel","stylesheet");$e$$inline_141$$.setAttribute("id","ui-theme");$name$$inline_140_src$$inline_142$$=$$NS$$inline_131$$.baseStaticContent+"js/plugin/jquery-ui/1.9.2/themes/"+$name$$inline_140_src$$inline_142$$+"/jquery-ui.css";$e$$inline_141$$.setAttribute("href",
$name$$inline_140_src$$inline_142$$);console.log("[Injecting/css]",$name$$inline_140_src$$inline_142$$);document.getElementsByTagName("head")[0].appendChild($e$$inline_141$$)};$Cjquery_theme_injector$$inline_135$$.prototype.inject_script=$Cjquery_theme_injector$$inline_135$$.prototype.$inject_script$;$$NS$$inline_131$$._class_pool.Cjquery_theme_injector=$Cjquery_theme_injector$$inline_135$$;
function $Cjquery_theme$$inline_136$$(){this.className="Cjquery-theme";this.label="chooser";this.key="shojs-jquery-theme";this.pTheme=this.$pTheme$=new $Cparameter_select$$inline_133$$({parent:this,label:"name",choices:{base:"base",black_tie:"black-tie",blitzer:"blitzer",cupertino:"cupertino",dark_hive:"dark-hive",dot_luv:"dot-luv",eggplant:"eggplant",excite_bike:"excite-bike",flick:"flick",hot_sneaks:"hot-sneaks",humanity:"humanity",le_frog:"le-frog",mint_choc:"mint-choc",overcast:"overcast",pepper_grinder:"pepper-grinder",
redmond:"redmond",smoothness:"smoothness",south_street:"south-street",start:"start",sunny:"sunny",swanky_purse:"swanky-purse",trontastic:"trontastic",ui_darkness:"ui-darkness",ui_lightness:"ui-lightness",vader:"vader"},def:"base",callback_change:function($src$$inline_144_value$$inline_143$$){$src$$inline_144_value$$inline_143$$=window.$graphit$.$baseStaticContent$+"js/plugin/jquery-ui/1.9.2/themes/"+$src$$inline_144_value$$inline_143$$+"/jquery-ui.css";console.log("src",$src$$inline_144_value$$inline_143$$);
$("#ui-theme").attr("href",$src$$inline_144_value$$inline_143$$)}});this.$rootElm$=$JSCompiler_alias_NULL$$;return this}$Cjquery_theme$$inline_136$$.prototype.$dom_build$=function $$Cjquery_theme$$inline_136$$$$$dom_build$$(){var $d$$inline_145$$=$('<div title="Theme chooser"/>');$d$$inline_145$$.append(this.$pTheme$.$dom_get$());this.$rootElm$=$d$$inline_145$$;return this};$Cjquery_theme$$inline_136$$.prototype.dom_build=$Cjquery_theme$$inline_136$$.prototype.$dom_build$;
$Cjquery_theme$$inline_136$$.prototype.$dom_get$=function $$Cjquery_theme$$inline_136$$$$$dom_get$$($force$$inline_146$$){return this.$rootElm$&&$force$$inline_146$$!=$JSCompiler_alias_VOID$$&&!$force$$inline_146$$?this.$rootElm$:this.$dom_build$().$rootElm$};$Cjquery_theme$$inline_136$$.prototype.dom_get=$Cjquery_theme$$inline_136$$.prototype.$dom_get$;$$NS$$inline_131$$._class_pool.Cjquery_theme=$Cjquery_theme$$inline_136$$;
